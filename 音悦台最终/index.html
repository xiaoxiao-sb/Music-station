<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
		<title></title>
		<link rel="stylesheet" href="css/index.css" />
		<!--<style>
			#wrap .contentWrap .content .bannerWrap .bannerList {
				width: 500%;
			}
		</style>-->
	</head>
	<body>
		<div id="wrap">
			<header class="header">
				<div class="headerTop">
					<h1 class="logo">
						<a href="javascript:;">
							<img src="img/logo.png" alt="" />
						</a>
					</h1>
					<a href="javascript:;" class="menuBtn menuBtnClose"></a>
					<div class="btns">
						<a href="javascript:;">搜索</a>
						<a href="javascript:;">登录</a>
						<a href="javascript:;">注册</a>
					</div>
				</div>
				<form class="search">
					<input type="text" placeholder="请输入搜索内容。。。"/>
					<input type="submit" value="搜索"/>
				</form>
				<ul class="mask">
					<li>
						<a href="javascript:;">首页</a>
					</li>
					<li>
						<a href="javascript:;">MV</a>
					</li>
					<li>
						<a href="javascript:;">悦单</a>
					</li>
					<li>
						<a href="javascript:;">V榜</a>
					</li>
					<li>
						<a href="javascript:;">音悦</a>
					</li>
					<li>
						<a href="javascript:;">商城</a>
					</li>
					<li>
						<a href="javascript:;">节目</a>
					</li>
					<li>
						<a href="javascript:;">饭团</a>
					</li>
					<li>
						<a href="javascript:;">资讯</a>
					</li>
					<li>
						<a href="javascript:;">我的家</a>
					</li>
					<li>
						<a href="javascript:;">APP下载</a>
					</li>
					<li>
						<a href="javascript:;">热门应用</a>
					</li>
				</ul>
			</header>
			<div class="contentWrap">
				<div class="content">
					<nav class="navWrap">
						<ul class="navList">
							<li class="active">
								<a href="javascript:;">首页</a>
							</li>
							<li class="">
								<a href="javascript:;">MV</a>
							</li>
							<li class="">
								<a href="javascript:;">悦单</a>
							</li>
							<li class="">
								<a href="javascript:;">V榜</a>
							</li>
							<li class="">
								<a href="javascript:;">音悦</a>
							</li>
							<li class="">
								<a href="javascript:;">商城</a>
							</li>
							<li class="">
								<a href="javascript:;">节目</a>
							</li>
							<li class="">
								<a href="javascript:;">饭团</a>
							</li>
							<li class="">
								<a href="javascript:;">资讯</a>
							</li>
							<li class="">
								<a href="javascript:;">我的家</a>
							</li>
							<li class="">
								<a href="javascript:;">APP下载</a>
							</li>
							<li class="">
								<a href="javascript:;">热门应用</a>
							</li>
						</ul>
					</nav>
					<div class="bannerWrap">
						<ul class="bannerList">
							<li>
								<a href="javascript:;">
									<img src="img/1.jpg" alt="" />
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/2.jpg" alt="" />
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/3.jpg" alt="" />
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/4.jpg" alt="" />
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/5.jpg" alt="" />
								</a>
							</li>
							
						</ul>
						<div class="icons">
							<span class="active"></span>
							<span></span>
							<span></span>
							<span></span>
							<span></span>
						</div>
					</div>
					<div class="tab">
						<header class="tabHeader">
							<h3>MV首播</h3>
							<a href="javascript:;">更多&gt;</a>
						</header>
						<nav class="tabNav">
							<a href="javascript:;">全部</a>
							<a href="javascript:;">内地</a>
							<a href="javascript:;">港台</a>
							<a href="javascript:;">欧美</a>
							<a href="javascript:;">韩国</a>
							<a href="javascript:;">日本</a>
							<span class="smallGreen"></span>
						</nav>
						
						<div class="tabWrap">
							<div class="tabList">
								<ul class="loading"></ul>
								<ul class="tabMain">
									<li>
										<a href="javascript:;">
											<img src="img/a.jpg" alt="" />
											<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
										</a>
										<div class="ices">
											<span class="left">777</span>
											<span class="right">55</span>
										</div>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/b.jpg" alt="" />
											<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
										</a>
										<div class="ices">
											<span class="left">777</span>
											<span class="right">55</span>
										</div>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/c.jpg" alt="" />
											<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
										</a>
										<div class="ices">
											<span class="left">777</span>
											<span class="right">55</span>
										</div>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/d.jpg" alt="" />
											<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
										</a>
										<div class="ices">
											<span class="left">777</span>
											<span class="right">55</span>
										</div>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/e.jpg" alt="" />
											<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
										</a>
										<div class="ices">
											<span class="left">777</span>
											<span class="right">55</span>
										</div>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/f.jpg" alt="" />
											<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
										</a>
										<div class="ices">
											<span class="left">777</span>
											<span class="right">55</span>
										</div>
									</li>
								</ul>
								<ul class="loading"></ul>
							</div>
						</div>
						
					</div>
					<div class="tab">
							<header class="tabHeader">
								<h3>MV首播</h3>
								<a href="javascript:;">更多&gt;</a>
							</header>
							<nav class="tabNav">
								<a href="javascript:;">全部</a>
								<a href="javascript:;">内地</a>
								<a href="javascript:;">港台</a>
								<a href="javascript:;">欧美</a>
								<a href="javascript:;">韩国</a>
								<a href="javascript:;">日本</a>
								<span class="smallGreen"></span>
							</nav>
							
							<div class="tabWrap">
								<div class="tabList">
									<ul class="loading"></ul>
									<ul class="tabMain">
										<li>
											<a href="javascript:;">
												<img src="img/a.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/b.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/c.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/d.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/e.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/f.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
									</ul>
									<ul class="loading"></ul>
								</div>
							</div>
							
						</div>
					<div class="tab">
							<header class="tabHeader">
								<h3>MV首播</h3>
								<a href="javascript:;">更多&gt;</a>
							</header>
							<nav class="tabNav">
								<a href="javascript:;">全部</a>
								<a href="javascript:;">内地</a>
								<a href="javascript:;">港台</a>
								<a href="javascript:;">欧美</a>
								<a href="javascript:;">韩国</a>
								<a href="javascript:;">日本</a>
								<span class="smallGreen"></span>
							</nav>
							
							<div class="tabWrap">
								<div class="tabList">
									<ul class="loading"></ul>
									<ul class="tabMain">
										<li>
											<a href="javascript:;">
												<img src="img/a.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/b.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/c.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/d.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/e.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/f.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
									</ul>
									<ul class="loading"></ul>
								</div>
							</div>
							
						</div>
					<div class="tab">
							<header class="tabHeader">
								<h3>MV首播</h3>
								<a href="javascript:;">更多&gt;</a>
							</header>
							<nav class="tabNav">
								<a href="javascript:;">全部</a>
								<a href="javascript:;">内地</a>
								<a href="javascript:;">港台</a>
								<a href="javascript:;">欧美</a>
								<a href="javascript:;">韩国</a>
								<a href="javascript:;">日本</a>
								<span class="smallGreen"></span>
							</nav>
							
							<div class="tabWrap">
								<div class="tabList">
									<ul class="loading"></ul>
									<ul class="tabMain">
										<li>
											<a href="javascript:;">
												<img src="img/a.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/b.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/c.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/d.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/e.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/f.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
									</ul>
									<ul class="loading"></ul>
								</div>
							</div>
							
						</div>
					<div class="tab">
							<header class="tabHeader">
								<h3>MV首播</h3>
								<a href="javascript:;">更多&gt;</a>
							</header>
							<nav class="tabNav">
								<a href="javascript:;">全部</a>
								<a href="javascript:;">内地</a>
								<a href="javascript:;">港台</a>
								<a href="javascript:;">欧美</a>
								<a href="javascript:;">韩国</a>
								<a href="javascript:;">日本</a>
								<span class="smallGreen"></span>
							</nav>
							
							<div class="tabWrap">
								<div class="tabList">
									<ul class="loading"></ul>
									<ul class="tabMain">
										<li>
											<a href="javascript:;">
												<img src="img/a.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/b.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/c.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/d.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/e.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
										<li>
											<a href="javascript:;">
												<img src="img/f.jpg" alt="" />
												<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
											</a>
											<div class="ices">
												<span class="left">777</span>
												<span class="right">55</span>
											</div>
										</li>
									</ul>
									<ul class="loading"></ul>
								</div>
							</div>
							
						</div>
					<div class="tab">
						<header class="tabHeader">
							<h3>MV首播</h3>
							<a href="javascript:;">更多&gt;</a>
						</header>
						<nav class="tabNav">
							<a href="javascript:;">全部</a>
							<a href="javascript:;">内地</a>
							<a href="javascript:;">港台</a>
							<a href="javascript:;">欧美</a>
							<a href="javascript:;">韩国</a>
							<a href="javascript:;">日本</a>
							<span class="smallGreen"></span>
						</nav>
						
						<div class="tabWrap">
							<div class="tabList">
								<ul class="loading"></ul>
								<ul class="tabMain">
									<li>
										<a href="javascript:;">
											<img src="img/a.jpg" alt="" />
											<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
										</a>
										<div class="ices">
											<span class="left">777</span>
											<span class="right">55</span>
										</div>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/b.jpg" alt="" />
											<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
										</a>
										<div class="ices">
											<span class="left">777</span>
											<span class="right">55</span>
										</div>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/c.jpg" alt="" />
											<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
										</a>
										<div class="ices">
											<span class="left">777</span>
											<span class="right">55</span>
										</div>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/d.jpg" alt="" />
											<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
										</a>
										<div class="ices">
											<span class="left">777</span>
											<span class="right">55</span>
										</div>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/e.jpg" alt="" />
											<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
										</a>
										<div class="ices">
											<span class="left">777</span>
											<span class="right">55</span>
										</div>
									</li>
									<li>
										<a href="javascript:;">
											<img src="img/f.jpg" alt="" />
											<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
										</a>
										<div class="ices">
											<span class="left">777</span>
											<span class="right">55</span>
										</div>
									</li>
								</ul>
								<ul class="loading"></ul>
							</div>
						</div>
						
					</div>
				</div>
			</div>
			<div class="scrollBar"></div>
		</div>
	</body>
	
	<script src="js/transform.js"></script>
	<script src="js/drag.js"></script>
	
	
	<script>
		!(function(){
			var width = document.documentElement.clientWidth;
			var styleNode = document.createElement('style');
			styleNode.innerHTML = 'html{font-size: '+ width/16 +'px !important;}';
			document.head.appendChild(styleNode);
		})();
		
		
		document.addEventListener('touchstart',function(event){
			event.preventDefault();
		});
		
		
		var aNodes = document.querySelectorAll('a');
		
		for(var i = 0; i < aNodes.length; i++){
			aNodes[i].addEventListener('touchstart',function(){
				window.location.href = this.href;
			})
		}
		
		
		window.onload = function(){
			menuBtnChange();
			focusChange();
			navMove();
			changeColor();
			bannerMove();
			tabMove();
			contentMove();
		}
		
		//头部交互
		
		function menuBtnChange(){
			var menuBtn = document.querySelector('#wrap .header .headerTop .menuBtn');
			var mask = document.querySelector('#wrap .header .mask');
			var flag = false;
			menuBtn.addEventListener('touchstart',function(event){
				if(flag){
					menuBtn.className = 'menuBtn menuBtnClose';
					mask.style.display = 'none';
				}else{
					menuBtn.className = 'menuBtn menuBtnOpen';
					mask.style.display = 'block';
				}
				flag = !flag;
				// 阻止事件冒泡，因为点击其它的地方要去隐藏mask，如果不阻止冒泡，点击按钮打开的时候，也会冒泡到document身上
				// 刚打开，就会关闭，我们看不到打开的效果
				event.stopPropagation();
				//因为我们阻止了事件冒泡，那么对于这个按钮来说浏览器默认行为就没办法去取消，因此我们需要给它单独取消；
				event.preventDefault();
			});
			
			
			document.addEventListener('touchstart',function(){
				if(flag){
					menuBtn.className = 'menuBtn menuBtnClose';
					mask.style.display = 'none';
				}
				flag = false;
			});
			
			mask.addEventListener('touchstart',function(event){
				event.stopPropagation();
				event.preventDefault();
			});
		}
		//手动的让文本输入框获取和失去焦点
		function focusChange(){
			var textInput = document.querySelector('#wrap .header .search input[type="text"]');
			textInput.addEventListener('touchstart',function(event){
				textInput.focus();
				event.stopPropagation();
				event.preventDefault();
			})
			
			document.addEventListener('touchstart',function(){
				textInput.blur();
			})
		}
		//nav导航的滑动
		function navMove(){
			var navWrap = document.querySelector('#wrap .contentWrap .content .navWrap');
			var navList = document.querySelector('#wrap .contentWrap .content .navWrap .navList');
			var startX = 0;
			var eleX = 0;
			var s1 = 0;
			var s2 = 0;
			var t1 = 0;
			var t2 = 0;
			
			navWrap.addEventListener('touchstart',function(event){
				var touch = event.changedTouches[0];
				navList.style.transition = 'none';
				eleX = transformCss(navList,'translateX');
				startX = touch.clientX;
				s1 = eleX;
				t1 = new Date().getTime();//毫秒  
			});
			
			navWrap.addEventListener('touchmove',function(event){
				var touch = event.changedTouches[0];
				var endX = touch.clientX;
				var disX = endX - startX;
				var lastX = eleX + disX;
				
				
				//临界值的橡皮筋效果，滑100走80  有一个阻尼系数，我们需要求一个阻尼系数来让100减到80 
				//这个系数必须是 0~1之间的一个小数，并且这个小数会越来越小，才能达到最终的极限；
				if(lastX > 0){
					var scale = 0.6 - lastX / (3*document.documentElement.clientWidth);
					lastX = lastX * scale;
				}else if(lastX < document.documentElement.clientWidth - navList.offsetWidth){
					var temp = Math.abs(lastX) - Math.abs(document.documentElement.clientWidth - navList.offsetWidth);
					var scale = 0.6 - temp / (3*document.documentElement.clientWidth);
					temp = temp * scale;
					lastX = document.documentElement.clientWidth - navList.offsetWidth - temp;
				}
				
				transformCss(navList,'translateX',lastX);
				
			});
			
			navWrap.addEventListener('touchend',function(event){
				var touch = event.changedTouches[0];
				//加速
				s2 = transformCss(navList,'translateX');//这个位置和move当中最终设置的位置是重合的;
				t2 = new Date().getTime();
				var speed = (s2 - s1) / (t2 - t1);
				var lastX = s2 + speed * 100;
				
				//回弹
				var bezier = '';
				
				if(lastX > 0){
					lastX = 0;
					bezier = 'cubic-bezier(.13,.67,.71,1.79)';
				}else if(lastX < document.documentElement.clientWidth - navList.offsetWidth){
					lastX = document.documentElement.clientWidth - navList.offsetWidth;
					bezier = 'cubic-bezier(.13,.67,.71,1.79)';
				}
				
				
				navList.style.transition = '1s '+bezier;
				transformCss(navList,'translateX',lastX);
			});
		}
		//nav导航变色
		function changeColor(){
			var navItems = document.querySelectorAll('#wrap .contentWrap .content .navWrap .navList li');
			var isMove = false;
			for(var i = 0; i < navItems.length; i++){
				//解决nav移动时候的误触问题。
				navItems[i].addEventListener('touchmove',function(){
					isMove = true;
				})
				
				navItems[i].addEventListener('touchend',function(){
					if(!isMove){
						for(var j = 0; j < navItems.length; j++){
							navItems[j].className = '';
						}
						this.className = 'active';
					}
					//重置状态；
					isMove = false;
					
				});
			}
		}
		//banner交互
		function bannerMove(){
			var bannerWrap = document.querySelector('#wrap .contentWrap .content .bannerWrap');
			var bannerList = document.querySelector('#wrap .contentWrap .content .bannerWrap .bannerList');
			
			
			//无缝的结构添加一组
			bannerList.innerHTML += bannerList.innerHTML;
			
			
			var bannerItems = document.querySelectorAll('#wrap .contentWrap .content .bannerWrap .bannerList li');
			var bannerIcons = document.querySelectorAll('#wrap .contentWrap .content .bannerWrap .icons span');
			
			var styleNode = document.createElement('style');
			styleNode.innerHTML = '#wrap .contentWrap .content .bannerWrap .bannerList {width: '+ bannerItems.length +'00%;}';
			styleNode.innerHTML += '#wrap .contentWrap .content .bannerWrap .bannerList li {width: '+ 100/bannerItems.length +'%;}';
			document.head.appendChild(styleNode);
			
			var eleX = 0;
			var startX = 0;
			var startY = 0;
	//		var disX = 0`
			var index = 0;
			var isFirst = true;
			var timer = null;
			
			
			bannerWrap.addEventListener('touchstart',function(event){
				var touch = event.changedTouches[0];
				bannerList.style.transition = 'none';
				
				if(index == 0){
					index = bannerIcons.length;
					//要立马瞬变到第五张图片的位置  从0开始
					var lastX = -index * document.documentElement.clientWidth;
					transformCss(bannerList,'translateX',lastX);
				}else if(index == bannerItems.length - 1){
					index = bannerIcons.length - 1;
					var lastX = -index * document.documentElement.clientWidth;
					transformCss(bannerList,'translateX',lastX);
				}
				
				
				eleX = transformCss(bannerList,'translateX');
				startX = touch.clientX;
				startY = touch.clientY;
				isFirst = true;
				clearInterval(timer);
			});
			
			bannerWrap.addEventListener('touchmove',function(event){
				var touch = event.changedTouches[0];
				
				//非第一次滑屏的防抖逻辑
				if(!isFirst){
					return;
				}
				
				var endX = touch.clientX;
				var endY = touch.clientY;
				var disX = endX - startX;
				var disY = endY - startY;
				
				//只是在考虑滑屏时候第一次滑动的逻辑，看垂直方向是不是大于水平方向的距离差
				if(Math.abs(disY) > Math.abs(disX)){
					if(isFirst){
						isFirst = false;//给后面滑屏的非第一次置一个标志；
						return;//只是禁止第一次水平方向的逻辑
					}
				}
				
				
				
				
				
				var lastX = eleX + disX;
				transformCss(bannerList,'translateX',lastX);
			});
			
			bannerWrap.addEventListener('touchend',function(event){
				var touch = event.changedTouches[0];
				//判断手指滑屏的方向是向左滑还是向右滑
				//bannerList最终走的位置  = - 图片的下标  * 图片的宽度
				
				var lastX = transformCss(bannerList,'translateX');
	//			if(disX < 0){
	//				index = Math.ceil(-lastX / document.documentElement.clientWidth);
	//				lastX = -index * document.documentElement.clientWidth
	//				bannerList.style.transition = '1s';
	//				transformCss(bannerList,'translateX',lastX);
	//			}else{
	//				index = Math.floor(-lastX / document.documentElement.clientWidth);
	//				lastX = -index * document.documentElement.clientWidth
	//				bannerList.style.transition = '1s';
	//				transformCss(bannerList,'translateX',lastX);
	//			}
				
				index = Math.round(-lastX / document.documentElement.clientWidth);
				lastX = -index * document.documentElement.clientWidth
				bannerList.style.transition = '1s';
				transformCss(bannerList,'translateX',lastX);
				
				
				for(var i = 0; i < bannerIcons.length; i++){
					bannerIcons[i].className = '';
				}
				bannerIcons[index%bannerIcons.length].className = 'active';
				
				autoRun();
			});
			
			
			
			//定时器
	//		autoRun();
			function autoRun(){
				timer = setInterval(function(){
					if(index == 9){
						index = 4;
						var lastX = -index * document.documentElement.clientWidth;
						bannerList.style.transition = 'none';
						transformCss(bannerList,'translateX',lastX);
					}
					
					setTimeout(function(){
						index++;
						var lastX = -index * document.documentElement.clientWidth;
						bannerList.style.transition = '1s';
						transformCss(bannerList,'translateX',lastX);
						
						for(var i = 0; i < bannerIcons.length; i++){
							bannerIcons[i].className = '';
						}
						bannerIcons[index%bannerIcons.length].className = 'active';
						
					},20)
				},2000)
			}
		}
		//tab滑屏逻辑
		function tabMove(){
			var tabWrapList = document.querySelectorAll('#wrap .contentWrap .content .tab .tabWrap');
			var tabListList = document.querySelectorAll('#wrap .contentWrap .content .tab .tabWrap .tabList');
			var tabNavList = document.querySelectorAll('#wrap .contentWrap .content .tab .tabNav');
			var width = tabNavList[0].offsetWidth;
			
			for(var i = 0; i < tabWrapList.length; i++){
				move(tabWrapList[i],tabListList[i],tabNavList[i]);
			}
			
			
			function move(tabWrap,tabList,tabNav){
				//初始所有的主体内容显示
				transformCss(tabList,'translateX',-width);
				var eleX = 0;
				var startX = 0;
				var startY = 0;
	 			var loadings = tabList.querySelectorAll('.loading');
	 			var smallGreen = tabNav.querySelector('.smallGreen');
	 			var tabNavItems = tabNav.querySelectorAll('a');
				var isMove = true;
				var isFirst = true;
				var disX = 0;
				var index = 0;
				tabWrap.addEventListener('touchstart',function(event){
					var touch = event.changedTouches[0];
//					tabList.style.transition = 'none';
					
					eleX = transformCss(tabList,'translateX');
					startX = touch.clientX;
					startY = touch.clientY;
					//防抖逻辑重置
					isFirst = true;
//					过渡没有划过一半再去清，否则元素划过去直接点击检测过渡检测一半被清除，出现卡死现象；
					if(Math.abs(disX) < width/2){
						tabList.style.transition = 'none';
					}
				});
				
				tabWrap.addEventListener('touchmove',function(event){
					var touch = event.changedTouches[0];
					//防抖动非第一次
					if(!isFirst){
						return;
					}
					
					//判断用户是否可滑
					if(!isMove){
						return;
					}
					
					var endX = touch.clientX;
					var endY = touch.clientY;
					disX = endX - startX;
					var disY = endY - startY;
					
					//防抖逻辑第一次
					if(Math.abs(disY) > Math.abs(disX)){
						if(isFirst){
							isFirst = false;
							return;
						}
					}
					
					
					var lastX = eleX + disX;
					transformCss(tabList,'translateX',lastX);
					
					//手指滑动超过一半的逻辑
					if(Math.abs(disX) > width/2){
						if(disX > 0){
							lastX = 0;
							index--;
						}else{
							lastX = -2 * width;
							index++;
						}
						tabList.style.transition = '1s';
						transformCss(tabList,'translateX',lastX);
						
						//小绿的移动
						
	//					if(disX > 0){
	//						index--;
	//					}else{
	//						index++;
	//					}
						
						if(index < 0){
							index = tabNavItems.length - 1;
						}else if(index > tabNavItems.length - 1){
							index = 0;
						}
						
						var greenX = index * smallGreen.offsetWidth;
						smallGreen.style.transition = '1s';
						transformCss(smallGreen,'translateX',greenX);
						
						
						//划过去之后用户不能再滑
						isMove = false;
						
						//当滑屏完成检测过渡是否完成，完成之后图标才会出现
						tabList.addEventListener('transitionend',func);
						tabList.addEventListener('webkitTransitionEnd',func);
						
						function func(){
							if(disX > 0){
								loadings[0].style.opacity = 1;
								loadings[1].style.opacity = 0;
							}else{
								loadings[0].style.opacity = 0;
								loadings[1].style.opacity = 1;
							}
							//解绑检测过渡事件；
							tabList.removeEventListener('transitionend',func);
							tabList.removeEventListener('webkitTransitionEnd',func);
							
							setTimeout(function(){
								//主体内容回来
								lastX = -width;
								tabList.style.transition = 'none';
								transformCss(tabList,'translateX',lastX);
								//用户再次可以滑动
								isMove = true;
								//loading图全部隐藏
								loadings[0].style.opacity = 0;
								loadings[1].style.opacity = 0;
								
							},2000)
						}
						
					}
					
					
					
				});
				
				tabWrap.addEventListener('touchend',function(event){
					var touch = event.changedTouches[0];
					if(Math.abs(disX) < width/2){
						var lastX = -width;
						tabList.style.transition = '1s';
						transformCss(tabList,'translateX',lastX);
					}
				});
				
			}
		}
		//整体内容区域竖向滑屏
		function contentMove(){
			var contentWrap = document.querySelector('#wrap .contentWrap');
			var content = document.querySelector('#wrap .contentWrap .content');
			//求滚动条的高度
			var scrollBar = document.querySelector('#wrap .scrollBar');
			//滚动条的高度/屏幕的高度 = 屏幕的高度/内容的高度
			var scrollScale = document.documentElement.clientHeight / content.offsetHeight;
			scrollBar.style.height = document.documentElement.clientHeight * scrollScale + 'px';
			
			
			var callback = {
				start:function(){
					scrollBar.style.opacity = 1;
				},
				
				move:function(){
					scrollBar.style.opacity = 1;
					//跟随内容的移动往相反的方向移动
					var lastY = transformCss(content,'translateY');
					transformCss(scrollBar,'translateY',-scrollScale * lastY);
				},
				
				end:function(){
					scrollBar.style.opacity = 0;
				}
			}
			
			
			
			contentDrag(contentWrap,callback);
		}
		
		
		
		
		
	
	</script>
</html>
